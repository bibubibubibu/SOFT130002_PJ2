# Project 2 文档

## 16307130207 朱晓阳

PJ2的目的是实现一个逻辑完整功能齐全的网站，为了完成该网站的逻辑，我将PJ1的代码全部搬运到了.php格式的文件中，并将逻辑或分开或独立地写在.php文件中。

本文档将按从主页到登录界面的顺序分别介绍前后端的实现逻辑。

### main.php

主页的部分继用了之前html的代码，将其中用于展示图片的部分抹去，换成一个php函数，调用该函数时，php代码连接数据库并读取数据库中存储的图片数据，并将图片数据按之前html中的格式echo出来。

### browse.php

浏览页部分，这部分本来是要实现一个按照国家或地区或者作者等条件筛选图片的展示，但由于怎么读下拉框和怎么读点选链接然后调用函数我没搞明白，这里就是做了一个数据库的条件搜索，然后展示符合条件的图片

### search.php

同上的问题，我也不晓得怎么读搜索框里的内容，所以这里同样是做了一个条件搜索和条状的展示。

### mycollection.php

这个页面是用户的收藏图片页面，为了实现用户的收藏与用户的图片分开，又建了一个存放用户收藏的表，首先获取cookie中的已登录用户（这里没有做，默认为Mike），然后根据已登录用户的信息查询他的收藏，再根据id查找图片数据库将其中的图片获取展示。

### mypics.php

我的图片页面，简单的数据库操作，将数据库中用户为当前用户（由cookie获取，但是没有做，默认为Mike）的图片获取并做展示，删除则直接调用delete.php，将想要删除的图片id作为参数传递过去构造MYSQL请求进行删除。

### login.php

登录页面，输入框为表单，点击登录按钮将表单信息POST给处理的testlogin.php, 处理页面将登录信息获取并构造MYSQL语句，查询数据库，如果有匹配则登陆成功，这里需要改一下cookie，但是没有做

### register.php

注册页面，输入框为表单，后端操作与登录相同，注册时将用户添加到用户数据库即可。这里不需要改cookie。

##不足与反思

这个项目涉及到前端与后端的交互，其中一些数据的获取逻辑较为复杂，前后端交互过程较为繁琐，由于时间在期末，又恰逢毕业季，没有足够的时间和精力去完成这些学习，实属遗憾。

有一个cookie的登记，涉及的知识上并不复杂，仅需要改变和获取一下cookie即可，但是这里因为时间关系也没有做进去，而是使用了默认值，实属可惜。